<%=render "layouts/header"%>

<div class="container">
    <div class="row">
        <div class="col-md-1"></div>
        <div class="col-md-11">
            <div class="row mt-5">
                <h1><%=@sauna.name%></h1>
                <h3 class="pt-2"><%=@sauna.address%></h3>
            </div>
            <div class="row mt-5" style="">
                <div class="col-md-10 row-cols-2">
                    <h3>サウナ画像</h3>
                    <div class="card">
                        <%=image_tag @sauna.get_image(900,600), style: ""%>
                    </div>
                </div>

                <div class="row mt-5">
                    <div class="col-md-auto">
                        <h3><i class="fa-solid fa-fire fa-xl pe-1" style="color: #d32727;"></i>サウナ室の温度
                        <p class="fs-3 mt-3 text-center"><%=@sauna.sauna_info.temperature%>度</p></h3>
                    </div>
                    <div class="ms-md-4 col-md-auto">
                        <h3><i class="fa-solid fa-droplet fa-xl pe-1" style="color: #200cb6;"></i>水風呂の温度
                        <p class="fs-3 mt-3 text-center"><%=@sauna.water.temperature%>度</p></h3>
                    </div>
                </div>

                <div class="row mt-5">
                    <div class="col-10">
                        <% if @sauna.sauna_favorited_by?(current_user) %>
                            <span class="fs-5 ps-2">
                            <%= link_to sauna_sauna_favorite_path(@sauna.id), data: {"turbo-method": :delete} do %>
                                <i class="fa-regular fa-thumbs-up fa-lg" style="color: #e83030;"></i> <%= @sauna.sauna_favorites.count %>
                            <% end %>
                            </span>
                            <% else %>
                            <span class="fs-5 ps-2">
                            <%= link_to sauna_sauna_favorite_path(@sauna.id), data: {"turbo-method": :post} do %>
                                <i class="fa-regular fa-thumbs-up fa-lg" style="color: #141619;"></i> <%= @sauna.sauna_favorites.count %>
                            <% end %>
                            </span>
                        <% end %>
                    </div>
                </div>

                <div class="row mt-5">
                    <div class="row col-md-5">
                        <h3>みんなからの情報</h3>
                    </div>

                    <div class="row mt-3">
                        <%if @sauna_comments.count > 0 %>
                            <p><%=@sauna_comments.count%><p>
                        <%else%>
                            <p class="pt-1 pb-2">まだ情報がありません。情報提供にご協力お願いいたします。</p>
                        <%end%>
                    </div>
                </div>

                <div class="row mt-5">
                    <div class="col-md-8">
                        <div class="mt-2">
                            <h5 class="pb-2">情報提供フォーム</h5>
                            <% flash.each do |message_type, message| %>
                                <span class="flash-message mb-2 <%=message_type%>"><%=message%></span>
                            <%end%>
                            <%=form_with model: @sauna_comment, url: sauna_sauna_comments_path(@sauna.id), local: true do |f|%>
                                <div class="row mb-2">
                                    <div class="col-md-5 form-group mb-2"> 
                                        <%= f.label :aufguss, 'アウフグースはありますか？', class: "mb-2"%>
                                        <div class="text-center"><%=f.select :aufguss, options_for_select(SaunaComment.aufgusses_i18n.keys.map{|k| [I18n.t("enums.sauna_comment.aufguss.#{k}"), k]}), {}, class: "form-select"%></div>
                                    </div>
                                    <div class="col-md-2"></div>
                                    <div class="col-md-5 form-group mb-2">
                                        <%= f.label :autorolly, 'オートロウリュはありますか？', class: "mb-2"%>
                                       <div class="text-center"><%=f.select :autorolly, options_for_select(SaunaComment.autorollies_i18n.keys.map{|k| [I18n.t("enums.sauna_comment.autorolly.#{k}"), k]}), {}, class: "form-select"%></div>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-md-5 form-group mb-2"> 
                                        <%= f.label :air_bath, '外気浴ですか？', class: "mb-2"%>
                                        <div class="text-center"><%=f.select :air_bath, options_for_select(SaunaComment.air_baths_i18n.keys.map{|k| [I18n.t("enums.sauna_comment.air_bath.#{k}"), k]}), {}, class: "form-select"%></div>
                                    </div>
                                    <div class="col-md-2"></div>
                                    <div class="col-md-5 form-group mb-2">
                                        <%= f.label :whisking, 'ウィスキングのサービスはありますか？', class: "mb-2"%>
                                       <div class="text-center"><%=f.select :whisking, options_for_select(SaunaComment.whiskings_i18n.keys.map{|k| [I18n.t("enums.sauna_comment.whisking.#{k}"), k]}), {}, class: "form-select"%></div>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-md-5 form-group mb-2"> 
                                        <%= f.label :restaurant, '食事処はありますか？', class: "mb-2"%>
                                        <div class="text-center"><%=f.select :restaurant, options_for_select(SaunaComment.restaurants_i18n.keys.map{|k| [I18n.t("enums.sauna_comment.restaurant.#{k}"), k]}), {}, class: "form-select"%></div>
                                    </div>
                                    <div class="col-md-2"></div>
                                    <div class="col-md-5 form-group mb-2">
                                        <%= f.label :water, 'ウォーターサーバーはありますか？', class: "mb-2"%>
                                       <div class="text-center"><%=f.select :water, options_for_select(SaunaComment.waters_i18n.keys.map{|k| [I18n.t("enums.sauna_comment.water.#{k}"), k]}), {}, class: "form-select"%></div>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-md-5 form-group mb-2"> 
                                        <%= f.label :parking, '駐車場はありますか？', class: "mb-2"%>
                                        <div class="text-center"><%=f.select :parking, options_for_select(SaunaComment.parkings_i18n.keys.map{|k| [I18n.t("enums.sauna_comment.parking.#{k}"), k]}), {}, class: "form-select"%></div>
                                    </div>
                                    <div class="col-md-2"></div>
                                    <div class="col-md-5 form-group mb-2">
                                        <%= f.label :age, 'どれくらいの年代の方が多くいましたか？', class: "mb-2"%>
                                       <div class="text-center"><%=f.select :age, options_for_select(SaunaComment.ages_i18n.keys.map{|k| [I18n.t("enums.sauna_comment.age.#{k}"), k]}), {}, class: "form-select"%></div>
                                    </div>
                                </div>
                                
                                <%= f.label :comment, 'コメント', class: "mb-2"%>
                                <%=f.text_area :comment, placeholder: "追加の情報があれば入力してください。", class: "form-control mb-3", rows: "4"%>
                                <%=f.submit "送信する", class: "btn btn-primary"%>
                            <%end%>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>